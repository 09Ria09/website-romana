<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script
            src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
    <link id="indexCSS" rel="stylesheet" href="css/index.css">
</head>
<body style="margin: 0">
<div id="fantastic">
    <div id="textFantastic"></div>
</div>
<div id="carte">
    <div id="textCarte"></div>
</div>
<script>
    var current = "start";

    function animateCss(element, animationName, callback) {
        element.addClass("animated" + ' ' + animationName);

        function handleAnimationEnd() {
            element.removeClass("animated" + ' ' + animationName);

            if (typeof callback === 'function') callback()
        }

        element.on('animationend', handleAnimationEnd);
    }

    function switchSides(chosen, htmlFile = chosen + ".html") {

        if (chosen === 'fantastic')
            notChosen = 'carte';
        else notChosen = 'fantastic';

        $("#" + notChosen).contents().addClass("deleting");
        $(".deleting").css("animation-duration", "0.5s");
        animateCss($(".deleting"), "fadeOut", function () {
            $(".deleting").remove();

            $("#" + chosen).css("flex", "1 0 0");
            $("#" + notChosen).css("flex", "0 0 30px");

            setTimeout(function () {

                $.get(htmlFile, function (data) {
                    $("#" + chosen).append(data);
                });

                current = chosen;
                $("#" + notChosen).append('<div id="switchBar"></div>');
                $("#switchBarScript").remove();
                $.get('switchBar.html', function (data) {
                    $("body").append(data);
                });
                animateCss($("#switchBar"), "fadeIn");

            }, parseFloat($("#" + notChosen).css("transition-duration").replace('s', '')) * 1000);
        });
    }
</script>
<script id="startScript">

    $(function () {
        $.get('texts/LoremIpsum.txt', function (data) {
            $("#textFantastic").append(data);
        });

        $.get('texts/LoremIpsum.txt', function (data) {
            $("#textCarte").append(data);
        });

        $("#fantastic").on('mouseenter', function () {
            $("#fantastic").css("flex-grow", "1.5").css("background-color", "#ffeccc");
        });
        $("#fantastic").on('mouseleave', function () {
            $("#fantastic").css("flex-grow", "1").css("background-color", "moccasin");
        });
        $("#fantastic").on("click", function () {
            $("#fantastic").off();
            $("#carte").off();
            $("#textFantastic").addClass("deleting");
            switchSides("fantastic");
            $("#startScript").remove();
        });

        $("#carte").on('mouseenter', function () {
            $("#carte").css("flex-grow", "1.5").css("background-color", "#b6e1fc");
        });
        $("#carte").on('mouseleave', function () {
            $("#carte").css("flex-grow", "1").css("background-color", "lightskyblue");
        });
        $("#carte").on("click", function () {
            $("#fantastic").off();
            $("#carte").off();
            $("#textCarte").addClass("deleting");
            switchSides("carte");
            $("#startScript").remove();
        })
    })
</script>
</body>
</html>