<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script
            src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
    <link id="index_css" rel="stylesheet" href="css/index.css">
</head>
<body style="margin: 0">
<div id="fantastic">
    <div id="text_fantastic"></div>
</div>
<div id="carte">
    <div id="text_carte"></div>
</div>
<script>
    function animateCss(element, animationName, callback) {
        element.addClass("animated" + ' ' + animationName);

        function handleAnimationEnd() {
            element.removeClass("animated" + ' ' + animationName);

            if (typeof callback === 'function') callback()
        }

        element.on('animationend', handleAnimationEnd);
    }

    function switchSides(chosen) {

        if (chosen === 'fantastic')
            notChosen = 'carte';
        else notChosen = 'fantastic';

        $("#" + notChosen).contents().addClass("deleting");
        $(".deleting").css("animation-duration", "0.5s");
        animateCss($(".deleting"), "fadeOut", function () {
            $(".deleting").remove();
            $("#" + notChosen).css("flex", "0 0 30px");
            setTimeout(function () {
                $.get(chosen + '.html', function (data) {
                    $("#" + chosen).append(data);
                });
                $("#" + notChosen).append('<div id="switch_bar">'+notChosen+'</div>');
                animateCss($("#switch_bar"), "fadeIn")
            }, parseFloat($("#" + notChosen).css("transition-duration").replace('s', '')) * 1000);
        });
    }
</script>
<script id="start_script">

    $(function () {
        $.get('texts/LoremIpsum.txt', function (data) {
            $("#text_fantastic").append(data);
        });

        $.get('texts/LoremIpsum.txt', function (data) {
            $("#text_carte").append(data);
        });

        $("#fantastic").on('mouseenter', function () {
            $("#fantastic").css("flex-grow", "3").css("background-color", "#ffeccc");
        });
        $("#fantastic").on('mouseleave', function () {
            $("#fantastic").css("flex-grow", "1").css("background-color", "moccasin");
        });
        $("#fantastic").on("click", function () {
            $("#fantastic").off();
            $("#carte").off();
            $("#text_fantastic").addClass("deleting");
            switchSides("fantastic");
            $("#start_script").remove();
        });

        $("#carte").on('mouseenter', function () {
            $("#carte").css("flex-grow", "3").css("background-color", "#b6e1fc");
        });
        $("#carte").on('mouseleave', function () {
            $("#carte").css("flex-grow", "1").css("background-color", "lightskyblue");
        });
        $("#carte").on("click", function () {
            $("#fantastic").off();
            $("#carte").off();
            $("#text_carte").addClass("deleting");
            switchSides("carte");
            $("#start_script").remove();
        })
    })
</script>
</body>
</html>